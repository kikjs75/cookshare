# CookShare MVP 기능 명세서

> 작성일: 2026-02-18
> 버전: 1.0

---

## 1. 서비스 개요

**CookShare**는 누구나 레시피를 공유하고 발견할 수 있는 요리 레시피 커뮤니티 플랫폼이다.

| 항목 | 내용 |
|------|------|
| 한 줄 설명 | 요리 레시피를 작성·탐색·공유하는 커뮤니티 |
| 대상 사용자 | 요리를 즐기는 일반인, 레시피를 공유하고 싶은 홈쿡 |
| 핵심 가치 | 간결한 레시피 작성 경험 + 풍부한 검색/탐색 |

---

## 2. 우선순위 기준

| 단계 | 정의 | 포함 기준 |
|------|------|----------|
| **P0** | MVP 출시 필수 | 없으면 서비스 자체가 동작하지 않는 핵심 기능 |
| **P1** | 출시 직후 필수 | 사용자 유지·재방문에 직접 기여하는 기능 |
| **P2** | 성장 단계 | 커뮤니티 확장 또는 편의성을 높이는 기능 |

---

## 3. 사용자 스토리 목록

### P0 — 핵심 기능 (현재 구현 완료)

---

#### US-01 레시피 목록 탐색 (비회원)

> **As** 방문자로서
> **I want to** 로그인 없이 레시피 목록을 볼 수 있다
> **So that** 서비스 가치를 체험하고 가입 여부를 판단할 수 있다

**인수 조건**
- [ ] 홈 화면에서 최신순 레시피 카드 목록이 표시된다
- [ ] 썸네일·제목·조리 시간·난이도·좋아요 수가 카드에 표시된다
- [ ] 페이지당 12개씩 페이지네이션된다
- [ ] 비회원도 목록을 조회할 수 있다 (인증 불필요)

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `GET /api/recipes`

---

#### US-02 레시피 상세 조회 (비회원)

> **As** 방문자로서
> **I want to** 레시피 상세 페이지를 볼 수 있다
> **So that** 재료·조리 단계를 확인하고 요리에 활용할 수 있다

**인수 조건**
- [ ] 제목·설명·썸네일·조리 시간·인분·난이도가 표시된다
- [ ] 재료 목록(이름·양·단위)이 순서대로 표시된다
- [ ] 조리 단계가 번호순으로 표시된다
- [ ] 태그 목록이 표시된다
- [ ] 조회 수가 1씩 증가한다
- [ ] 비회원도 조회 가능하다

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `GET /api/recipes/:id`

---

#### US-03 회원가입

> **As** 신규 사용자로서
> **I want to** 이메일·비밀번호로 계정을 만들 수 있다
> **So that** 레시피를 작성하고 커뮤니티에 참여할 수 있다

**인수 조건**
- [ ] 이메일·비밀번호·사용자명을 입력해 가입할 수 있다
- [ ] 이미 사용 중인 이메일/사용자명은 가입이 거부된다
- [ ] 비밀번호는 해시 처리되어 저장된다
- [ ] 가입 성공 시 JWT 액세스 토큰을 반환한다
- [ ] 필수 항목 누락 시 명확한 에러 메시지가 표시된다

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `POST /api/auth/register`

---

#### US-04 로그인

> **As** 기존 회원으로서
> **I want to** 이메일·비밀번호로 로그인할 수 있다
> **So that** 인증이 필요한 기능(작성, 좋아요 등)을 사용할 수 있다

**인수 조건**
- [ ] 올바른 이메일·비밀번호 입력 시 JWT 토큰을 반환한다
- [ ] 잘못된 자격 증명 시 401 에러가 반환된다
- [ ] 토큰을 Authorization 헤더(Bearer)로 전달해 인증한다
- [ ] 로그인 성공 후 이전 페이지 또는 홈으로 리다이렉트된다

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `POST /api/auth/login`

---

#### US-05 레시피 작성

> **As** 로그인한 사용자로서
> **I want to** 새 레시피를 작성할 수 있다
> **So that** 나의 요리 노하우를 커뮤니티와 공유할 수 있다

**인수 조건**
- [ ] 제목·설명·조리 시간·인분·난이도를 입력할 수 있다
- [ ] 재료를 여러 개 추가할 수 있다 (이름·양·단위)
- [ ] 조리 단계를 순서대로 추가할 수 있다
- [ ] 태그를 추가할 수 있다
- [ ] 썸네일 이미지를 업로드할 수 있다
- [ ] 작성 완료 후 상세 페이지로 이동한다

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `POST /api/recipes`

---

#### US-06 레시피 수정

> **As** 레시피 작성자로서
> **I want to** 내가 작성한 레시피를 수정할 수 있다
> **So that** 오류를 고치거나 더 나은 내용으로 업데이트할 수 있다

**인수 조건**
- [ ] 본인이 작성한 레시피만 수정 버튼이 노출된다
- [ ] 기존 내용이 폼에 미리 채워진다
- [ ] 제목·설명·재료·단계·태그 모두 수정 가능하다
- [ ] 타인의 레시피 수정 시도 시 403 에러가 반환된다

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `PUT /api/recipes/:id`

---

#### US-07 레시피 삭제

> **As** 레시피 작성자로서
> **I want to** 내가 작성한 레시피를 삭제할 수 있다
> **So that** 더 이상 공유하고 싶지 않은 레시피를 제거할 수 있다

**인수 조건**
- [ ] 본인이 작성한 레시피만 삭제 버튼이 노출된다
- [ ] 삭제 전 확인 다이얼로그가 표시된다
- [ ] 삭제 후 목록 페이지로 이동한다
- [ ] 타인의 레시피 삭제 시도 시 403 에러가 반환된다
- [ ] 연관 재료·단계·태그·좋아요·댓글이 함께 삭제된다 (CASCADE)

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `DELETE /api/recipes/:id`

---

#### US-08 이미지 업로드

> **As** 레시피 작성자로서
> **I want to** 레시피 썸네일 이미지를 업로드할 수 있다
> **So that** 시각적으로 매력적인 레시피를 공유할 수 있다

**인수 조건**
- [ ] JPG·PNG·WebP 형식을 지원한다
- [ ] 파일 크기는 5MB 이하로 제한한다
- [ ] 업로드 후 이미지 URL이 반환된다
- [ ] 로컬 스토리지 또는 S3를 환경 변수로 전환할 수 있다

**구현 상태**: ✅ 완료
**관련 엔드포인트**: `POST /api/recipes/upload/image`

---

### P1 — 출시 직후 구현

---

#### US-09 좋아요 토글

> **As** 로그인한 사용자로서
> **I want to** 마음에 드는 레시피에 좋아요를 누를 수 있다
> **So that** 관심 있는 레시피를 표시하고 작성자에게 반응을 줄 수 있다

**인수 조건**
- [ ] 상세 페이지에서 좋아요 버튼을 누를 수 있다
- [ ] 이미 좋아요한 레시피는 버튼을 다시 누르면 취소된다 (토글)
- [ ] 좋아요 수가 실시간으로 업데이트된다
- [ ] 비로그인 사용자가 누르면 로그인 페이지로 유도한다
- [ ] 목록 카드에도 좋아요 수가 표시된다

**구현 상태**: ✅ 완료 (DB·API)
**관련 엔드포인트**: `POST /api/recipes/:id/like`
**잔여 작업**: 프론트엔드 UI 반영 확인

---

#### US-10 검색 및 필터

> **As** 방문자로서
> **I want to** 키워드·태그·난이도로 레시피를 검색할 수 있다
> **So that** 원하는 레시피를 빠르게 찾을 수 있다

**인수 조건**
- [ ] 키워드로 제목·설명을 전문 검색할 수 있다
- [ ] 태그 이름으로 필터링할 수 있다
- [ ] 난이도(easy·medium·hard)로 필터링할 수 있다
- [ ] 여러 조건을 조합해 AND 검색할 수 있다
- [ ] 검색 결과가 없으면 빈 상태 메시지가 표시된다

**구현 상태**: ✅ 완료 (쿼리 파라미터 기반)
**관련 엔드포인트**: `GET /api/recipes?q=&tag=&difficulty=`
**잔여 작업**: 프론트엔드 검색 UI 연동 확인

---

#### US-11 댓글 작성 및 조회

> **As** 로그인한 사용자로서
> **I want to** 레시피에 댓글을 달 수 있다
> **So that** 후기를 남기거나 작성자와 소통할 수 있다

**인수 조건**
- [ ] 레시피 상세 페이지 하단에 댓글 목록이 표시된다
- [ ] 비회원도 댓글 목록을 볼 수 있다
- [ ] 로그인한 사용자는 댓글을 작성할 수 있다
- [ ] 댓글은 최신순으로 정렬된다
- [ ] 댓글 작성자 본인은 댓글을 삭제할 수 있다
- [ ] 빈 댓글은 제출할 수 없다
- [ ] 댓글 수가 레시피 카드에 표시된다

**구현 상태**: 🔲 미구현 (comments 테이블 스키마만 존재)
**예상 구현 시간**: 백엔드 4h / 프론트엔드 3h

**구현 가이드**
```
[백엔드]
- GET    /api/recipes/:id/comments      — 댓글 목록 (비인증 허용)
- POST   /api/recipes/:id/comments      — 댓글 작성 (인증 필요)
- DELETE /api/recipes/:id/comments/:cid — 댓글 삭제 (본인만)

[프론트엔드]
- CommentList 컴포넌트 (목록 + 스크롤)
- CommentForm 컴포넌트 (textarea + 제출)
- 레시피 카드에 댓글 수 뱃지 추가
```

---

#### US-12 프로필 수정

> **As** 로그인한 사용자로서
> **I want to** 아바타 이미지와 자기소개를 수정할 수 있다
> **So that** 나를 커뮤니티에 소개하는 프로필을 꾸밀 수 있다

**인수 조건**
- [ ] `/profile/edit` 페이지에서 아바타 이미지를 업로드할 수 있다
- [ ] 자기소개(bio, 최대 200자)를 입력·수정할 수 있다
- [ ] 사용자명(username)을 변경할 수 있다 (중복 체크 포함)
- [ ] 저장 성공 시 프로필 페이지로 이동한다
- [ ] 현재 정보가 폼에 미리 채워진다

**구현 상태**: 🔲 미구현 (users 테이블에 avatar_url·bio 컬럼 존재)
**예상 구현 시간**: 백엔드 2h / 프론트엔드 2h

**구현 가이드**
```
[백엔드]
- PUT /api/auth/profile   — 프로필 수정 (인증 필요)
  body: { username?, bio?, avatar_url? }

[프론트엔드]
- /profile/edit 페이지 신규 생성
- 아바타 업로드: 기존 /api/recipes/upload/image 재활용 가능
```

---

#### US-13 내 레시피 목록

> **As** 로그인한 사용자로서
> **I want to** 내가 작성한 레시피만 모아서 볼 수 있다
> **So that** 내 레시피를 관리하고 수정·삭제할 수 있다

**인수 조건**
- [ ] 프로필 페이지 또는 마이페이지에서 내 레시피 목록을 볼 수 있다
- [ ] 레시피 카드에 수정·삭제 바로가기 버튼이 표시된다
- [ ] 작성한 레시피가 없으면 빈 상태 안내 메시지가 표시된다
- [ ] 최신 작성순으로 정렬된다

**구현 상태**: 🔲 미구현
**예상 구현 시간**: 백엔드 1h / 프론트엔드 1h

**구현 가이드**
```
[백엔드]
- GET /api/auth/me/recipes   — 내 레시피 목록 (인증 필요)
  또는 기존 GET /api/recipes?author_id={me} 파라미터 확장

[프론트엔드]
- /profile 또는 /my/recipes 페이지에 RecipeCard 목록 렌더링
```

---

### P2 — 성장 단계 구현

---

#### US-14 레시피 북마크

> **As** 로그인한 사용자로서
> **I want to** 나중에 만들어볼 레시피를 북마크할 수 있다
> **So that** 관심 레시피를 모아두고 쉽게 다시 찾을 수 있다

**인수 조건**
- [ ] 레시피 상세·카드에서 북마크 아이콘을 클릭할 수 있다
- [ ] 북마크한 레시피는 아이콘이 채워진 상태로 표시된다
- [ ] `/bookmarks` 페이지에서 북마크한 레시피 목록을 볼 수 있다
- [ ] 북마크 취소 시 목록에서 즉시 제거된다

**구현 상태**: 🔲 미구현 (스키마 없음 — 신규 테이블 필요)
**예상 구현 시간**: 백엔드 3h / 프론트엔드 2h

**구현 가이드**
```sql
-- 신규 테이블 추가 필요
CREATE TABLE bookmarks (
  user_id   TEXT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  recipe_id TEXT NOT NULL REFERENCES recipes(id) ON DELETE CASCADE,
  created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (user_id, recipe_id)
);
```
```
[백엔드]
- POST   /api/recipes/:id/bookmark   — 북마크 토글
- GET    /api/auth/me/bookmarks       — 내 북마크 목록
```

---

#### US-15 팔로우 및 피드

> **As** 로그인한 사용자로서
> **I want to** 좋아하는 작성자를 팔로우하고 피드를 구독할 수 있다
> **So that** 즐겨 보는 작성자의 새 레시피를 놓치지 않을 수 있다

**인수 조건**
- [ ] 작성자 프로필 페이지에서 팔로우·언팔로우 버튼을 누를 수 있다
- [ ] 팔로워·팔로잉 수가 프로필에 표시된다
- [ ] `/feed` 페이지에서 팔로우한 작성자의 최신 레시피가 표시된다
- [ ] 피드는 최신순으로 정렬된다

**구현 상태**: 🔲 미구현 (스키마 없음 — 신규 테이블 필요)
**예상 구현 시간**: 백엔드 6h / 프론트엔드 5h

**구현 가이드**
```sql
-- 신규 테이블 추가 필요
CREATE TABLE follows (
  follower_id  TEXT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  following_id TEXT NOT NULL REFERENCES users(id) ON DELETE CASCADE,
  created_at   DATETIME DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (follower_id, following_id)
);
```
```
[백엔드]
- POST /api/users/:id/follow   — 팔로우 토글
- GET  /api/feed               — 팔로잉 피드 (인증 필요)
- GET  /api/users/:id          — 사용자 프로필 + 팔로워/팔로잉 수
```

---

#### US-16 소셜 로그인 (Google)

> **As** 신규 사용자로서
> **I want to** Google 계정으로 빠르게 가입·로그인할 수 있다
> **So that** 별도 비밀번호 없이 서비스를 이용할 수 있다

**인수 조건**
- [ ] 로그인·회원가입 페이지에 "Google로 계속하기" 버튼이 있다
- [ ] Google OAuth 2.0 인증 후 자동 회원가입 또는 로그인된다
- [ ] 소셜 로그인 계정에는 비밀번호 없이 로그인할 수 있다
- [ ] 이미 이메일로 가입한 계정과 소셜 계정 충돌 시 안내 메시지가 표시된다

**구현 상태**: 🔲 미구현
**예상 구현 시간**: 백엔드 4h / 프론트엔드 3h

**구현 가이드**
```
[백엔드]
- GET  /api/auth/google           — Google OAuth 시작
- GET  /api/auth/google/callback  — OAuth 콜백 처리
- users 테이블에 google_id 컬럼 추가 필요

[프론트엔드]
- Passport.js 또는 NextAuth.js 활용 가능
- 로그인 페이지에 소셜 버튼 컴포넌트 추가
```

---

## 4. 스프린트 로드맵

### Sprint 0 — 기반 완료 (이미 구현)

| US | 기능 | 상태 |
|----|------|------|
| US-01 | 레시피 목록 탐색 | ✅ |
| US-02 | 레시피 상세 조회 | ✅ |
| US-03 | 회원가입 | ✅ |
| US-04 | 로그인 | ✅ |
| US-05 | 레시피 작성 | ✅ |
| US-06 | 레시피 수정 | ✅ |
| US-07 | 레시피 삭제 | ✅ |
| US-08 | 이미지 업로드 | ✅ |

### Sprint 1 — 핵심 UX 완성 (P1 잔여 기능)

> 예상 기간: 1~2주
> 총 예상 공수: 백엔드 7h / 프론트엔드 6h

| US | 기능 | 예상 시간 |
|----|------|----------|
| US-09 | 좋아요 UI 연동 | 0.5h |
| US-10 | 검색 UI 연동 | 0.5h |
| US-11 | 댓글 작성·조회 | BE 4h / FE 3h |
| US-12 | 프로필 수정 | BE 2h / FE 2h |
| US-13 | 내 레시피 목록 | BE 1h / FE 1h |

### Sprint 2 — 성장 기능 (P2)

> 예상 기간: 2~3주
> 총 예상 공수: 백엔드 13h / 프론트엔드 10h

| US | 기능 | 예상 시간 |
|----|------|----------|
| US-14 | 레시피 북마크 | BE 3h / FE 2h |
| US-15 | 팔로우·피드 | BE 6h / FE 5h |
| US-16 | 소셜 로그인 (Google) | BE 4h / FE 3h |

---

## 5. MVP 범위 외 기능

MVP 완료 후 데이터와 사용자 피드백을 바탕으로 검토할 기능이다.

| 기능 | 이유 |
|------|------|
| 레시피 평점 (별점) | 좋아요·댓글 데이터 확보 후 고려 |
| 알림 (신규 댓글·팔로우) | 팔로우 기능 완료 후 구현 |
| 레시피 PDF 내보내기 | 핵심 가치와 무관한 부가 기능 |
| 영양 정보 자동 계산 | 외부 API 의존, 초기 범위 제외 |
| 다국어 지원 | 초기 타깃 국내 사용자로 한정 |
| 모바일 앱 (React Native) | 웹 MVP 안정화 이후 검토 |

---

## 6. 기술 스택 참고

| 영역 | 기술 |
|------|------|
| 백엔드 | Node.js + Express + TypeScript |
| 데이터베이스 | SQLite (better-sqlite3) |
| 인증 | JWT (jsonwebtoken) |
| 파일 스토리지 | 로컬 또는 AWS S3 (환경 변수로 전환) |
| 프론트엔드 | Next.js 14 + TypeScript + Tailwind CSS |
| 상태 관리 | React Context (AuthContext) |
